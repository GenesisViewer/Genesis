name: test-rename-setup

on:

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:

build :
    
    runs-on: windows-latest
    steps:
      - name: create a fake directory
        run : mkdir ./build-vc-64 && mkdir ./build-vc-64/newview && mkdir ./build-vc-64/newview/Release
      - name: create fake Setup
        run : echo "Test" > ./build-vc-64/newview/Release/Genesis-Eve_0_0_1_52_x86_64_Setup.exe
      - name: find and rename
        run : $DateStamp = get-date -uformat "%Y-%m-%d@%H-%M-%S" && Get-ChildItem .\build-vc-64\newview\Release\*Setup.exe | Rename-Item -NewName Genesis-eve-0.0.1_nightly_build_-$DateStamp.exe && mv .\build-vc-64\newview\Release\Genesis-eve-0.0.1_nightly_build_-$DateStamp.exe c:/temp/
      - name: ls
        run : ls -l c:/temp/
